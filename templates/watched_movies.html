<!-- 
    AI Citation: Claude was used to help convert static HTML to Jinja2 templates.
    
    Prompt: "My Flask app needs to display database query results in HTML tables and populate 
    dropdowns dynamically. Show me how to add Jinja2 for loops and variable syntax to my 
    existing HTML files."
    
    What was done: Claude helped us convert hardcoded HTML table rows and dropdown options 
    into Jinja2 template syntax ({% for %} loops and {{ variable }} placeholders) so that 
    the pages dynamically display data from our MySQL database instead of static sample data.
    The original HTML structure, styling, and layout were preserved.
-->
<!DOCTYPE html>
<html>
<head>
    <title>Watched Movies - Movie Night Planner</title>
</head>
<body>
    <h1>Movie Night Planner Management System</h1>

    <nav>
        <a href="/">Home</a> |
        <a href="/users">Users</a> |
        <a href="/movies">Movies</a> |
        <a href="/saved-movies">Saved Movies</a> |
        <a href="/watched-movies">Watched Movies</a> | 
        <a href="/reset-database" style="color: red;">RESET DATABASE</a> |
        <a href="/delete-john-demo" style="color: rgb(255, 94, 0);">Delete John Smith (Demo)</a>
    </nav>

    <h2>Watched Movies</h2>
    <table id="watched_movies" border="1">
        <thead>
            <tr>
                <th>User Name</th>
                <th>Movie Title</th>
                <th>Genre</th>
                <th>Streaming Platform</th>
                <th>Watched Date</th>
            </tr>
        </thead>
        <tbody>
            {% for watched in watched_movies %}
            <tr>
                <td>{{ watched.user_name }}</td>
                <td>{{ watched.movie_title }}</td>
                <td>{{ watched.genre if watched.genre else 'N/A' }}</td>
                <td>{{ watched.streaming_platform if watched.streaming_platform else 'N/A' }}</td>
                <td>{{ watched.watched_date }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <h2>Mark a Movie as Watched</h2>
    <form>
        <label>User:</label>
        <select name="userId" required>
            <option value="">-- Select User --</option>
            {% for user in users %}
            <option value="{{ user.userId }}">{{ user.name }}</option>
            {% endfor %}
        </select>
        <br><br>
        
        <label>Movie:</label>
        <select name="movieId" required>
            <option value="">-- Select Movie --</option>
            {% for movie in movies %}
            <option value="{{ movie.movieId }}">{{ movie.display_name }}</option>
            {% endfor %}
        </select>
        <br><br>
        
        <label>Watched Date (optional, defaults to today):</label>
        <input type="date" name="watched_date">
        <br><br>
        
        <button type="submit">Mark as Watched</button>
    </form>
    
    <h2>Update the Date a Movie Was Watched</h2>
    <form>
        <label>User:</label>
        <select name="userId" required>
            <option value="">-- Select User --</option>
            {% for user in users %}
            <option value="{{ user.userId }}">{{ user.name }}</option>
            {% endfor %}
        </select>
        <br><br>
        
        <label>Movie:</label>
        <select name="movieId" required>
            <option value="">-- Select Movie --</option>
            {% for movie in movies %}
            <option value="{{ movie.movieId }}">{{ movie.display_name }}</option>
            {% endfor %}
        </select>
        <br><br>
        
        <label>New Watched Date:</label>
        <input type="date" name="watched_date" required>
        <br><br>
        
        <button type="submit">Update Watched Date</button>
    </form>
    
    <h2>Remove a Movie from Watch History</h2>
    <form>
        <label>User:</label>
        <select name="userId" required>
            <option value="">-- Select User --</option>
            {% for user in users %}
            <option value="{{ user.userId }}">{{ user.name }}</option>
            {% endfor %}
        </select>
        <br><br>
        
        <label>Movie:</label>
        <select name="movieId" required>
            <option value="">-- Select Movie --</option>
            {% for movie in movies %}
            <option value="{{ movie.movieId }}">{{ movie.display_name }}</option>
            {% endfor %}
        </select>
        <br><br>
        
        <button type="submit">Remove from Watch History</button>
    </form>
</body>
</html>